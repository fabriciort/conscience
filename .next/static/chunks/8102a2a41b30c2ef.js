(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7678,(e,r,o)=>{r.exports=e.r(17846)},29429,e=>{"use strict";var r=e.i(7765),o=e.i(10427),t=e.i(20755),l=e.i(7678);function a(){let e=(0,l.useRouter)(),a=(0,t.createClient)(),[c,s]=(0,o.useState)({title:"",excerpt:"",content:"",cover_image_url:"",required_tier:"free",tags:"",published:!1}),[i,n]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),x=async r=>{r.preventDefault(),n(!0),u("");try{let{data:{user:r}}=await a.auth.getUser();if(!r)throw Error("Not authenticated");let o=c.tags.split(",").map(e=>e.trim()).filter(e=>e.length>0),t=c.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),{error:l}=await a.from("posts").insert({researcher_id:r.id,title:c.title,slug:t,excerpt:c.excerpt||null,content:c.content,cover_image_url:c.cover_image_url||null,required_tier:c.required_tier,tags:o.length>0?o:null,published:c.published,published_at:c.published?new Date().toISOString():null});if(l)throw l;e.push("/studio/posts")}catch(e){u(e.message),n(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-[color:var(--text-primary)] mb-2",children:"Write New Article"}),(0,r.jsx)("p",{className:"text-[color:var(--text-secondary)]",children:"Share your knowledge through written content"})]}),d&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500 text-sm",children:d}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-[color:var(--surface)] rounded-xl border border-[color:var(--border)] p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Title *"}),(0,r.jsx)("input",{type:"text",value:c.title,onChange:e=>s({...c,title:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors",placeholder:"Enter article title"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Excerpt"}),(0,r.jsx)("textarea",{value:c.excerpt,onChange:e=>s({...c,excerpt:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors resize-none",placeholder:"Short summary (shown in previews)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Content * (Markdown supported)"}),(0,r.jsx)("textarea",{value:c.content,onChange:e=>s({...c,content:e.target.value}),required:!0,rows:15,className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors resize-none font-mono text-sm",placeholder:"# Your article content here..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Cover Image URL"}),(0,r.jsx)("input",{type:"url",value:c.cover_image_url,onChange:e=>s({...c,cover_image_url:e.target.value}),className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors",placeholder:"https://example.com/cover.jpg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Required Tier *"}),(0,r.jsxs)("select",{value:c.required_tier,onChange:e=>s({...c,required_tier:e.target.value}),className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors",children:[(0,r.jsx)("option",{value:"free",children:"Free"}),(0,r.jsx)("option",{value:"essential",children:"Essential"}),(0,r.jsx)("option",{value:"advanced",children:"Advanced"}),(0,r.jsx)("option",{value:"corporate",children:"Corporate"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-[color:var(--text-primary)] mb-2",children:"Tags (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:c.tags,onChange:e=>s({...c,tags:e.target.value}),className:"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors",placeholder:"tutorial, beginner, python"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"published",checked:c.published,onChange:e=>s({...c,published:e.target.checked}),className:"w-5 h-5 rounded border-[color:var(--border)] bg-[color:var(--background)] text-[color:var(--primary)] focus:ring-2 focus:ring-[color:var(--primary)] focus:ring-offset-0"}),(0,r.jsx)("label",{htmlFor:"published",className:"text-sm font-medium text-[color:var(--text-primary)] cursor-pointer",children:"Publish immediately"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-[color:var(--primary)] to-[color:var(--accent)] text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 transition-opacity",children:i?"Creating...":"Create Article"}),(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 bg-[color:var(--surface)] border border-[color:var(--border)] text-[color:var(--text-primary)] font-semibold rounded-lg hover:bg-[color:var(--surface-hover)] transition-colors",children:"Cancel"})]})]})]})}e.s(["default",()=>a])}]);