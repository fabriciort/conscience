(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69620,e=>{"use strict";var t=e.i(7765),r=e.i(10427),i=e.i(20755);let s=(0,r.createContext)(void 0);function n({children:e}){let{user:n,profile:o,loading:l}=function(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),a=(0,i.createClient)();return(0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await a.auth.getUser();if(t(e),e){let{data:t}=await a.from("profiles").select(`
            *,
            researcher_profile:researcher_profiles(*)
          `).eq("id",e.id).single();n(t)}l(!1)})();let{data:{subscription:e}}=a.auth.onAuthStateChange(async(e,r)=>{if(t(r?.user??null),r?.user){let{data:e}=await a.from("profiles").select(`
            *,
            researcher_profile:researcher_profiles(*)
          `).eq("id",r.user.id).single();n(e)}else n(null);l(!1)});return()=>e.unsubscribe()},[a]),{user:e,profile:s,loading:o}}(),{tier:a,loading:u}=function(e){let[t,s]=(0,r.useState)("free"),[n,o]=(0,r.useState)(!0),l=(0,i.createClient)();return(0,r.useEffect)(()=>{e?(async()=>{let{data:t}=await l.from("profiles").select("subscription_tier").eq("id",e).single();t&&s(t.subscription_tier),o(!1)})():o(!1)},[e,l]),{tier:t,loading:n}}(n?.id),c={user:n,profile:o,tier:a,loading:l||u,isResearcher:o?.role==="researcher"||o?.role==="admin",isViewer:o?.role==="viewer",isAdmin:o?.role==="admin"};return(0,t.jsx)(s.Provider,{value:c,children:e})}function o(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e}e.s(["UserProvider",()=>n,"useUserContext",()=>o],69620)},64480,e=>{"use strict";var t=e.i(7765),r=e.i(10427),i=e.i(20755),s=e.i(69620);e.i(18865);let n="viewer@test.com",o="premium@test.com",l="researcher@test.com";async function a(e,t){return console.warn("devMockSubscription should only be used in development"),{data:null,error:Error("Not in development mode")}}function u(){let[e,t]=(0,r.useState)(!1),{user:n,profile:o,tier:l}=(0,s.useUserContext)(),a=(0,i.createClient)();1;return null}e.s(["DevToolbar",()=>u],64480)}]);