{"version":3,"sources":["turbopack:///[project]/app/studio/layout.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { createClient } from '@/lib/supabase/server';\nimport { redirect } from 'next/navigation';\n\nexport default async function StudioLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  if (!user) {\n    redirect('/auth/login');\n  }\n\n  const { data: profile } = await supabase\n    .from('profiles')\n    .select('*, researcher_profile:researcher_profiles(*)')\n    .eq('id', user.id)\n    .single();\n\n  // Only researchers and admins can access studio\n  if (profile?.role !== 'researcher' && profile?.role !== 'admin') {\n    redirect('/platform/feed');\n  }\n\n  const navItems = [\n    { href: '/studio/dashboard', label: 'Dashboard', icon: 'üìä' },\n    { href: '/studio/videos', label: 'Videos', icon: 'üé¨' },\n    { href: '/studio/posts', label: 'Articles', icon: 'üìù' },\n    { href: '/studio/analytics', label: 'Analytics', icon: 'üìà' },\n  ];\n\n  return (\n    <div className=\"flex min-h-screen bg-[color:var(--background)]\">\n      {/* Sidebar */}\n      <aside className=\"hidden w-64 border-r border-[color:var(--border)] bg-[color:var(--surface)] lg:block\">\n        <div className=\"flex h-16 items-center border-b border-[color:var(--border)] px-6\">\n          <Link\n            href=\"/studio/dashboard\"\n            className=\"text-xl font-bold bg-gradient-to-r from-[color:var(--primary)] to-[color:var(--accent)] bg-clip-text text-transparent\"\n          >\n            Studio\n          </Link>\n        </div>\n\n        <nav className=\"p-4 space-y-1\">\n          {navItems.map((item) => (\n            <Link\n              key={item.href}\n              href={item.href}\n              className=\"flex items-center gap-3 rounded-lg px-4 py-3 text-sm font-medium text-[color:var(--text-secondary)] hover:bg-[color:var(--surface-hover)] hover:text-[color:var(--text-primary)] transition-colors group\"\n            >\n              <span className=\"text-lg group-hover:scale-110 transition-transform\">\n                {item.icon}\n              </span>\n              {item.label}\n            </Link>\n          ))}\n        </nav>\n\n        <div className=\"absolute bottom-4 left-4 right-4\">\n          <Link\n            href=\"/platform/feed\"\n            className=\"flex w-full items-center justify-center gap-2 rounded-lg border border-[color:var(--border)] px-4 py-3 text-sm font-medium text-[color:var(--text-primary)] hover:bg-[color:var(--surface-hover)] transition-colors\"\n          >\n            ‚Üê View as Visitor\n          </Link>\n        </div>\n      </aside>\n\n      {/* Main Content */}\n      <div className=\"flex-1\">\n        {/* Top Bar */}\n        <header className=\"sticky top-0 z-40 border-b border-[color:var(--border)] bg-[color:var(--surface)]/95 backdrop-blur-md\">\n          <div className=\"flex h-16 items-center justify-between px-4 sm:px-6\">\n            <div className=\"flex items-center gap-4 lg:hidden\">\n              <Link\n                href=\"/studio/dashboard\"\n                className=\"text-lg font-bold bg-gradient-to-r from-[color:var(--primary)] to-[color:var(--accent)] bg-clip-text text-transparent\"\n              >\n                Studio\n              </Link>\n            </div>\n\n            <div className=\"ml-auto flex items-center gap-4\">\n              <div className=\"hidden md:block text-right\">\n                <p className=\"text-sm font-semibold text-[color:var(--text-primary)]\">\n                  {profile?.full_name}\n                </p>\n                <p className=\"text-xs text-[color:var(--text-secondary)]\">\n                  Researcher\n                </p>\n              </div>\n              <Link\n                href=\"/platform/settings\"\n                className=\"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-[color:var(--primary)] to-[color:var(--accent)] text-sm font-semibold text-white hover:opacity-90 transition-opacity\"\n              >\n                {profile?.full_name?.charAt(0).toUpperCase()}\n              </Link>\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main className=\"p-4 sm:p-6 lg:p-8\">{children}</main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,EAAa,UACzC,CAAQ,CAGT,EACC,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CAAE,KAAM,CAAE,MAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAElD,CAAC,GACH,CAAA,EADS,AACT,EAAA,QAAQ,AAAR,EAAS,eAGX,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,YACL,MAAM,CAAC,gDACP,EAAE,CAAC,KAAM,EAAK,EAAE,EAChB,MAAM,UAGL,GAAS,OAAS,cAAgB,GAAS,OAAS,SAAS,AAC/D,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,kBAWT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DAEb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,iGACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,oBACL,UAAU,iIACX,aAKH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBApBJ,AAqBR,CApBP,CAAE,KAAM,oBAAqB,MAAO,YAAa,KAAM,IAAK,EAC5D,CAAE,KAAM,iBAAkB,MAAO,SAAU,KAAM,IAAK,EACtD,CAAE,KAAM,gBAAiB,MAAO,WAAY,KAAM,IAAK,EACvD,CAAE,KAAM,oBAAqB,MAAO,YAAa,KAAM,IAAK,EAC7D,CAgBiB,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,EAAK,IAAI,CACf,UAAU,qNAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8DACb,EAAK,IAAI,GAEX,EAAK,KAAK,GAPN,EAAK,IAAI,KAYpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,iBACL,UAAU,+NACX,2BAOL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,iHAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,oBACL,UAAU,iIACX,aAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEACV,GAAS,YAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA6C,kBAI5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,qBACL,UAAU,+MAET,GAAS,WAAW,OAAO,GAAG,wBAOvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAAqB,SAI7C"}