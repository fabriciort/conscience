{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","turbopack:///[project]/app/platform/layout.tsx"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","import Link from 'next/link';\nimport { createClient } from '@/lib/supabase/server';\nimport { redirect } from 'next/navigation';\nimport type { Profile } from '@/lib/supabase/types';\n\nexport default async function PlatformLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const supabase = await createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  if (!user) {\n    redirect('/auth/login');\n  }\n\n  const { data: profile } = await supabase\n    .from('profiles')\n    .select('*')\n    .eq('id', user.id)\n    .single() as { data: Profile | null };\n\n  const handleLogout = async () => {\n    'use server';\n    const supabase = await createClient();\n    await supabase.auth.signOut();\n    redirect('/');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[color:var(--background)]\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 border-b border-[color:var(--border)] bg-[color:var(--surface)]/95 backdrop-blur-md\">\n        <div className=\"mx-auto max-w-[1400px] flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center gap-8\">\n            <Link\n              href=\"/platform/feed\"\n              className=\"text-xl font-bold text-[color:var(--text-primary)] hover:text-[color:var(--primary)] transition-colors\"\n            >\n              Conscience\n            </Link>\n            <nav className=\"hidden md:flex gap-6\">\n              <Link\n                href=\"/platform/feed\"\n                className=\"text-sm font-medium text-[color:var(--text-secondary)] hover:text-[color:var(--text-primary)] transition-colors\"\n              >\n                Feed\n              </Link>\n              <Link\n                href=\"/platform/researchers\"\n                className=\"text-sm font-medium text-[color:var(--text-secondary)] hover:text-[color:var(--text-primary)] transition-colors\"\n              >\n                Researchers\n              </Link>\n            </nav>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {/* Tier Badge */}\n            <div className=\"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[color:var(--surface-hover)] border border-[color:var(--border)]\">\n              <div className=\"w-2 h-2 rounded-full bg-[color:var(--primary)]\"></div>\n              <span className=\"text-xs font-semibold uppercase tracking-wide text-[color:var(--text-secondary)]\">\n                {profile?.subscription_tier || 'free'}\n              </span>\n            </div>\n\n            {/* User Menu */}\n            <div className=\"flex items-center gap-3\">\n              <Link\n                href=\"/platform/settings\"\n                className=\"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-[color:var(--primary)] to-[color:var(--accent)] text-sm font-semibold text-white hover:opacity-90 transition-opacity\"\n              >\n                {profile?.full_name?.charAt(0).toUpperCase()}\n              </Link>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main>{children}</main>\n    </div>\n  );\n}\n"],"names":["registerServerReference"],"mappings":"6CAAoD,OAAA,cAAA,CAAA,EAAA,aAAA,oCAC3CA,0BAAAA,qCAAAA,EAAAA,uBAAuB,YAAQ,CAAA,CAAA,IAAA,yDCDxC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,WAqBuB,EAAA,eAAf,EAEJ,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,GACnC,OAAM,EAAS,IAAI,CAAC,OAAO,GAC3B,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACX,EAvBa,eAAe,EAAe,UAC3C,CAAQ,CAGT,EACC,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAC7B,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAElD,CAAC,GACH,CAAA,EAAA,AADS,EACT,QAAA,AAAQ,EAAC,eAGX,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,EAAK,EAAE,EAChB,MAAM,GAST,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,iHAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+FACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,iBACL,UAAU,kHACX,eAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,iBACL,UAAU,2HACX,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,wBACL,UAAU,2HACX,sBAML,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yIACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4FACb,GAAS,mBAAqB,YAKnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,qBACL,UAAU,6MAET,GAAS,WAAW,OAAO,GAAG,0BAQzC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,MAGb,CA7DuB,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA","ignoreList":[0]}