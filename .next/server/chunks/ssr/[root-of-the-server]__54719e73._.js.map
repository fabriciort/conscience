{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/app/studio/posts/new/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { useRouter } from 'next/navigation';\n\nexport default function NewPostPage() {\n  const router = useRouter();\n  const supabase = createClient();\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    excerpt: '',\n    content: '',\n    cover_image_url: '',\n    required_tier: 'free' as 'free' | 'essential' | 'advanced' | 'corporate',\n    tags: '',\n    published: false,\n  });\n  \n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .trim();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (!user) {\n        throw new Error('Not authenticated');\n      }\n\n      const tagsArray = formData.tags\n        .split(',')\n        .map((t) => t.trim())\n        .filter((t) => t.length > 0);\n\n      const slug = generateSlug(formData.title);\n\n      const { error: insertError } = await supabase.from('posts').insert({\n        researcher_id: user.id,\n        title: formData.title,\n        slug,\n        excerpt: formData.excerpt || null,\n        content: formData.content,\n        cover_image_url: formData.cover_image_url || null,\n        required_tier: formData.required_tier,\n        tags: tagsArray.length > 0 ? tagsArray : null,\n        published: formData.published,\n        published_at: formData.published ? new Date().toISOString() : null,\n      });\n\n      if (insertError) throw insertError;\n\n      router.push('/studio/posts');\n    } catch (err: any) {\n      setError(err.message);\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-[color:var(--text-primary)] mb-2\">\n          Write New Article\n        </h1>\n        <p className=\"text-[color:var(--text-secondary)]\">\n          Share your knowledge through written content\n        </p>\n      </div>\n\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500 text-sm\">\n          {error}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        <div className=\"bg-[color:var(--surface)] rounded-xl border border-[color:var(--border)] p-6 space-y-6\">\n          {/* Title */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Title *\n            </label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) =>\n                setFormData({ ...formData, title: e.target.value })\n              }\n              required\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors\"\n              placeholder=\"Enter article title\"\n            />\n          </div>\n\n          {/* Excerpt */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Excerpt\n            </label>\n            <textarea\n              value={formData.excerpt}\n              onChange={(e) =>\n                setFormData({ ...formData, excerpt: e.target.value })\n              }\n              rows={3}\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors resize-none\"\n              placeholder=\"Short summary (shown in previews)\"\n            />\n          </div>\n\n          {/* Content */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Content * (Markdown supported)\n            </label>\n            <textarea\n              value={formData.content}\n              onChange={(e) =>\n                setFormData({ ...formData, content: e.target.value })\n              }\n              required\n              rows={15}\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors resize-none font-mono text-sm\"\n              placeholder=\"# Your article content here...\"\n            />\n          </div>\n\n          {/* Cover Image URL */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Cover Image URL\n            </label>\n            <input\n              type=\"url\"\n              value={formData.cover_image_url}\n              onChange={(e) =>\n                setFormData({ ...formData, cover_image_url: e.target.value })\n              }\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors\"\n              placeholder=\"https://example.com/cover.jpg\"\n            />\n          </div>\n\n          {/* Tier Selection */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Required Tier *\n            </label>\n            <select\n              value={formData.required_tier}\n              onChange={(e) =>\n                setFormData({\n                  ...formData,\n                  required_tier: e.target.value as any,\n                })\n              }\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors\"\n            >\n              <option value=\"free\">Free</option>\n              <option value=\"essential\">Essential</option>\n              <option value=\"advanced\">Advanced</option>\n              <option value=\"corporate\">Corporate</option>\n            </select>\n          </div>\n\n          {/* Tags */}\n          <div>\n            <label className=\"block text-sm font-semibold text-[color:var(--text-primary)] mb-2\">\n              Tags (comma-separated)\n            </label>\n            <input\n              type=\"text\"\n              value={formData.tags}\n              onChange={(e) =>\n                setFormData({ ...formData, tags: e.target.value })\n              }\n              className=\"w-full px-4 py-3 bg-[color:var(--background)] border border-[color:var(--border)] rounded-lg text-[color:var(--text-primary)] placeholder:text-[color:var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] transition-colors\"\n              placeholder=\"tutorial, beginner, python\"\n            />\n          </div>\n\n          {/* Published Toggle */}\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"published\"\n              checked={formData.published}\n              onChange={(e) =>\n                setFormData({ ...formData, published: e.target.checked })\n              }\n              className=\"w-5 h-5 rounded border-[color:var(--border)] bg-[color:var(--background)] text-[color:var(--primary)] focus:ring-2 focus:ring-[color:var(--primary)] focus:ring-offset-0\"\n            />\n            <label\n              htmlFor=\"published\"\n              className=\"text-sm font-medium text-[color:var(--text-primary)] cursor-pointer\"\n            >\n              Publish immediately\n            </label>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-4\">\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"flex-1 px-6 py-3 bg-gradient-to-r from-[color:var(--primary)] to-[color:var(--accent)] text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 transition-opacity\"\n          >\n            {isLoading ? 'Creating...' : 'Create Article'}\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => router.back()}\n            className=\"px-6 py-3 bg-[color:var(--surface)] border border-[color:var(--border)] text-[color:var(--text-primary)] font-semibold rounded-lg hover:bg-[color:var(--surface-hover)] transition-colors\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}