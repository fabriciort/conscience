module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},59579,a=>{a.n(a.i(80955))},86246,a=>{a.n(a.i(19316))},55948,a=>{a.n(a.i(88934))},18691,a=>{a.n(a.i(52466))},44653,a=>{a.n(a.i(36440))},37338,a=>{"use strict";function b(a){let b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=a%60;return b>0?`${b}:${String(c).padStart(2,"0")}:${String(d).padStart(2,"0")}`:`${c}:${String(d).padStart(2,"0")}`}function c(a){return a>=1e6?`${(a/1e6).toFixed(1)}M`:a>=1e3?`${(a/1e3).toFixed(1)}K`:a.toString()}a.i(19817),a.i(21136),a.s(["formatDuration",()=>b,"formatViewCount",()=>c],37338)},68359,a=>{"use strict";var b=a.i(11622),c=a.i(98310),d=a.i(37338);async function e(){let a=await (0,c.createClient)(),{data:{user:e}}=await a.auth.getUser(),{data:g}=await a.from("videos").select("*").eq("researcher_id",e?.id).order("view_count",{ascending:!1}),{data:h}=await a.from("posts").select("*").eq("researcher_id",e?.id).order("read_count",{ascending:!1}),i=g?.map(a=>a.id)||[],{data:j}=await a.from("view_history").select("*").in("video_id",i).order("created_at",{ascending:!1}).limit(100),k=g?.reduce((a,b)=>a+(b.view_count||0),0)||0,l=h?.reduce((a,b)=>a+(b.read_count||0),0)||0,m=g?.length||0,n=h?.length||0,o=g?.filter(a=>a.published).length||0,p=h?.filter(a=>a.published).length||0,q=m>0?Math.round(k/m):0,r=n>0?Math.round(l/n):0,s=j?.filter(a=>a.completed).length||0,t=j&&j.length>0?Math.round(s/j.length*100):0,u=g?.slice(0,5)||[],v=h?.slice(0,5)||[];return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[color:var(--text-primary)]",children:"Analytics"}),(0,b.jsx)("p",{className:"mt-2 text-[color:var(--text-muted)]",children:"Acompanhe o desempenho do seu conteÃºdo"})]}),(0,b.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(f,{title:"Total de VisualizaÃ§Ãµes",value:(0,d.formatViewCount)(k),subtitle:`${q} m\xe9dia/v\xeddeo`,icon:"ðŸ‘ï¸",color:"from-blue-500 to-blue-600"}),(0,b.jsx)(f,{title:"Total de Leituras",value:(0,d.formatViewCount)(l),subtitle:`${r} m\xe9dia/post`,icon:"ðŸ“–",color:"from-purple-500 to-purple-600"}),(0,b.jsx)(f,{title:"Taxa de ConclusÃ£o",value:`${t}%`,subtitle:`${s} v\xeddeos completos`,icon:"âœ…",color:"from-green-500 to-green-600"}),(0,b.jsx)(f,{title:"ConteÃºdo Total",value:`${m+n}`,subtitle:`${o+p} publicados`,icon:"ðŸ“Š",color:"from-amber-500 to-amber-600"})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-[color:var(--border-soft)] bg-white p-6",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-[color:var(--text-primary)]",children:"ðŸ† Top 5 VÃ­deos"}),u.length>0?(0,b.jsx)("div",{className:"space-y-3",children:u.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-[color:var(--border-soft)] p-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-[color:var(--coral)] text-sm font-bold text-white",children:c+1}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-[color:var(--text-primary)] line-clamp-1",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-[color:var(--text-muted)]",children:[(0,d.formatViewCount)(a.view_count)," visualizaÃ§Ãµes"]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-[color:var(--text-muted)]",children:"Nenhum vÃ­deo publicado ainda"})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-[color:var(--border-soft)] bg-white p-6",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-[color:var(--text-primary)]",children:"ðŸ† Top 5 Posts"}),v.length>0?(0,b.jsx)("div",{className:"space-y-3",children:v.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-[color:var(--border-soft)] p-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-[color:var(--coral)] text-sm font-bold text-white",children:c+1}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-[color:var(--text-primary)] line-clamp-1",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-[color:var(--text-muted)]",children:[(0,d.formatViewCount)(a.read_count)," leituras"]})]})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-[color:var(--text-muted)]",children:"Nenhum post publicado ainda"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-[color:var(--border-soft)] bg-white p-6",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-[color:var(--text-primary)]",children:"ðŸ“ˆ Atividade Recente"}),j&&j.length>0?(0,b.jsx)("div",{className:"space-y-2",children:j.slice(0,10).map(a=>{let c=g?.find(b=>b.id===a.video_id);return(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-[color:var(--border-soft)] p-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-[color:var(--text-primary)]",children:c?.title||"VÃ­deo"}),(0,b.jsx)("p",{className:"text-xs text-[color:var(--text-muted)]",children:new Date(a.created_at).toLocaleString("pt-BR")})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.completed?(0,b.jsx)("span",{className:"rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-700",children:"âœ“ Completo"}):(0,b.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-700",children:"Em andamento"})})]},a.id)})}):(0,b.jsx)("p",{className:"text-sm text-[color:var(--text-muted)]",children:"Nenhuma visualizaÃ§Ã£o registrada ainda"})]})]})}function f({title:a,value:c,subtitle:d,icon:e,color:f}){return(0,b.jsxs)("div",{className:"overflow-hidden rounded-lg border border-[color:var(--border-soft)] bg-white shadow-sm",children:[(0,b.jsx)("div",{className:`h-2 bg-gradient-to-r ${f}`}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-3xl",children:e}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-[color:var(--text-primary)]",children:c}),(0,b.jsx)("p",{className:"text-sm font-medium text-[color:var(--text-muted)]",children:a}),(0,b.jsx)("p",{className:"text-xs text-[color:var(--text-muted)]",children:d})]})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7fd1f752._.js.map