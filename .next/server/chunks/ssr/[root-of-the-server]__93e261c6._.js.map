{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/.pnpm/next@16.0.2_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/lib/contexts/UserContext.tsx","turbopack:///[project]/lib/hooks/useUser.ts","turbopack:///[project]/lib/hooks/useSubscription.ts","turbopack:///[project]/components/dev-toolbar.tsx","turbopack:///[project]/lib/utils/dev-helpers.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { createContext, useContext, type ReactNode } from 'react';\nimport { useUser } from '@/lib/hooks/useUser';\nimport { useSubscription } from '@/lib/hooks/useSubscription';\nimport type { User } from '@supabase/supabase-js';\nimport type { ProfileWithResearcherData, SubscriptionTier } from '@/lib/supabase/types';\n\ninterface UserContextType {\n  user: User | null;\n  profile: ProfileWithResearcherData | null;\n  tier: SubscriptionTier;\n  loading: boolean;\n  isResearcher: boolean;\n  isViewer: boolean;\n  isAdmin: boolean;\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\nexport function UserProvider({ children }: { children: ReactNode }) {\n  const { user, profile, loading: userLoading } = useUser();\n  const { tier, loading: tierLoading } = useSubscription(user?.id);\n\n  const loading = userLoading || tierLoading;\n\n  const value: UserContextType = {\n    user,\n    profile,\n    tier,\n    loading,\n    isResearcher: profile?.role === 'researcher' || profile?.role === 'admin',\n    isViewer: profile?.role === 'viewer',\n    isAdmin: profile?.role === 'admin',\n  };\n\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n}\n\nexport function useUserContext() {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUserContext must be used within a UserProvider');\n  }\n  return context;\n}\n\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport type { User } from '@supabase/supabase-js';\nimport type { ProfileWithResearcherData } from '@/lib/supabase/types';\n\nexport function useUser() {\n  const [user, setUser] = useState<User | null>(null);\n  const [profile, setProfile] = useState<ProfileWithResearcherData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const supabase = createClient();\n\n  useEffect(() => {\n    // Get initial session\n    const getUser = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      setUser(user);\n\n      if (user) {\n        // Get profile with researcher data\n        const { data: profileData } = await supabase\n          .from('profiles')\n          .select(`\n            *,\n            researcher_profile:researcher_profiles(*)\n          `)\n          .eq('id', user.id)\n          .single();\n\n        setProfile(profileData as ProfileWithResearcherData);\n      }\n      \n      setLoading(false);\n    };\n\n    getUser();\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n      setUser(session?.user ?? null);\n\n      if (session?.user) {\n        const { data: profileData } = await supabase\n          .from('profiles')\n          .select(`\n            *,\n            researcher_profile:researcher_profiles(*)\n          `)\n          .eq('id', session.user.id)\n          .single();\n\n        setProfile(profileData as ProfileWithResearcherData);\n      } else {\n        setProfile(null);\n      }\n\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [supabase]);\n\n  return { user, profile, loading };\n}\n\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport type { SubscriptionTier } from '@/lib/supabase/types';\n\nexport function useSubscription(userId: string | undefined) {\n  const [tier, setTier] = useState<SubscriptionTier>('free');\n  const [loading, setLoading] = useState(true);\n  const supabase = createClient();\n\n  useEffect(() => {\n    if (!userId) {\n      setLoading(false);\n      return;\n    }\n\n    const getSubscription = async () => {\n      // Get user profile tier\n      const { data: profile } = await supabase\n        .from('profiles')\n        .select('subscription_tier')\n        .eq('id', userId)\n        .single();\n\n      if (profile) {\n        setTier(profile.subscription_tier);\n      }\n\n      setLoading(false);\n    };\n\n    getSubscription();\n  }, [userId, supabase]);\n\n  return { tier, loading };\n}\n\n","'use client';\n\nimport { useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { useUserContext } from '@/lib/contexts/UserContext';\nimport { devMockSubscription, DEV_CONFIG } from '@/lib/utils/dev-helpers';\nimport type { SubscriptionTier } from '@/lib/supabase/types';\n\nexport function DevToolbar() {\n  const [isOpen, setIsOpen] = useState(false);\n  const { user, profile, tier } = useUserContext();\n  const supabase = createClient();\n\n  if (!DEV_CONFIG.enableDevToolbar) {\n    return null;\n  }\n\n  const handleQuickLogin = async (email: string) => {\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password: 'test123456', // Standard test password\n    });\n\n    if (error) {\n      console.error('Quick login error:', error);\n      alert(`Erro ao fazer login: ${error.message}`);\n    }\n  };\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n  };\n\n  const handleChangeTier = async (newTier: SubscriptionTier) => {\n    if (!user) {\n      alert('Fa√ßa login primeiro');\n      return;\n    }\n\n    const { error } = await devMockSubscription(user.id, newTier);\n    if (error) {\n      alert(`Erro ao mudar tier: ${error.message}`);\n    } else {\n      alert(`Tier alterado para: ${newTier}`);\n      window.location.reload(); // Reload to update UI\n    }\n  };\n\n  return (\n    <>\n      {/* Toggle Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-4 right-4 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-black text-white shadow-lg hover:bg-gray-800\"\n        title=\"Dev Tools\"\n      >\n        üõ†Ô∏è\n      </button>\n\n      {/* Panel */}\n      {isOpen && (\n        <div className=\"fixed bottom-20 right-4 z-50 w-80 rounded-lg border border-gray-300 bg-white p-4 shadow-2xl\">\n          <div className=\"mb-3 flex items-center justify-between\">\n            <h3 className=\"text-sm font-bold\">üõ†Ô∏è DEV MODE</h3>\n            <button\n              onClick={() => setIsOpen(false)}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              ‚úï\n            </button>\n          </div>\n\n          {/* Current User Info */}\n          <div className=\"mb-4 rounded bg-gray-100 p-2 text-xs\">\n            <p className=\"font-semibold\">\n              {user ? `Logado: ${profile?.full_name}` : 'N√£o logado'}\n            </p>\n            {profile && (\n              <>\n                <p>Role: {profile.role}</p>\n                <p>Tier: {tier}</p>\n              </>\n            )}\n          </div>\n\n          {/* Quick Login */}\n          <div className=\"mb-4\">\n            <p className=\"mb-2 text-xs font-semibold\">Login R√°pido:</p>\n            <div className=\"space-y-1\">\n              <button\n                onClick={() => handleQuickLogin(DEV_CONFIG.testUsers.viewer)}\n                className=\"w-full rounded bg-blue-500 px-3 py-1 text-xs text-white hover:bg-blue-600\"\n              >\n                üë§ Viewer (Free)\n              </button>\n              <button\n                onClick={() => handleQuickLogin(DEV_CONFIG.testUsers.premium)}\n                className=\"w-full rounded bg-purple-500 px-3 py-1 text-xs text-white hover:bg-purple-600\"\n              >\n                ‚≠ê Viewer (Advanced)\n              </button>\n              <button\n                onClick={() => handleQuickLogin(DEV_CONFIG.testUsers.researcher)}\n                className=\"w-full rounded bg-green-500 px-3 py-1 text-xs text-white hover:bg-green-600\"\n              >\n                üéì Researcher\n              </button>\n            </div>\n          </div>\n\n          {/* Change Tier */}\n          {user && profile?.role === 'viewer' && (\n            <div className=\"mb-4\">\n              <p className=\"mb-2 text-xs font-semibold\">Mudar Tier:</p>\n              <div className=\"grid grid-cols-2 gap-1\">\n                <button\n                  onClick={() => handleChangeTier('free')}\n                  className=\"rounded bg-gray-500 px-2 py-1 text-xs text-white hover:bg-gray-600\"\n                  disabled={tier === 'free'}\n                >\n                  Free\n                </button>\n                <button\n                  onClick={() => handleChangeTier('essential')}\n                  className=\"rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-600\"\n                  disabled={tier === 'essential'}\n                >\n                  Essential\n                </button>\n                <button\n                  onClick={() => handleChangeTier('advanced')}\n                  className=\"rounded bg-purple-500 px-2 py-1 text-xs text-white hover:bg-purple-600\"\n                  disabled={tier === 'advanced'}\n                >\n                  Advanced\n                </button>\n                <button\n                  onClick={() => handleChangeTier('corporate')}\n                  className=\"rounded bg-amber-500 px-2 py-1 text-xs text-white hover:bg-amber-600\"\n                  disabled={tier === 'corporate'}\n                >\n                  Corporate\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Logout */}\n          {user && (\n            <button\n              onClick={handleLogout}\n              className=\"w-full rounded bg-red-500 px-3 py-2 text-xs font-semibold text-white hover:bg-red-600\"\n            >\n              üö™ Logout\n            </button>\n          )}\n\n          {/* Quick Links */}\n          <div className=\"mt-4 border-t pt-3\">\n            <p className=\"mb-2 text-xs font-semibold\">Quick Links:</p>\n            <div className=\"space-y-1 text-xs\">\n              <a href=\"/platform/feed\" className=\"block text-blue-600 hover:underline\">\n                ‚Üí Platform Feed\n              </a>\n              <a href=\"/studio/dashboard\" className=\"block text-green-600 hover:underline\">\n                ‚Üí Studio Dashboard\n              </a>\n              <a href=\"/pricing\" className=\"block text-purple-600 hover:underline\">\n                ‚Üí Pricing\n              </a>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\n","import { createClient } from '@/lib/supabase/client';\nimport type { SubscriptionTier } from '@/lib/supabase/types';\n\nexport const DEV_CONFIG = {\n  enableDevToolbar: process.env.NODE_ENV === 'development',\n  bypassEmailVerification: true,\n  mockPayments: true,\n  showDebugInfo: process.env.NODE_ENV === 'development',\n  \n  // Test users for quick login\n  testUsers: {\n    viewer: 'viewer@test.com',\n    premium: 'premium@test.com',\n    researcher: 'researcher@test.com',\n  }\n};\n\n/**\n * Mock subscription purchase for development\n */\nexport async function devMockSubscription(\n  userId: string,\n  tier: SubscriptionTier\n) {\n  if (process.env.NODE_ENV !== 'development') {\n    console.warn('devMockSubscription should only be used in development');\n    return { data: null, error: new Error('Not in development mode') };\n  }\n\n  const supabase = createClient();\n  \n  // Create subscription record\n  const { data: subscription, error: subError } = await supabase\n    .from('subscriptions')\n    .insert({\n      user_id: userId,\n      tier,\n      starts_at: new Date().toISOString(),\n      expires_at: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString(),\n      is_active: true,\n      payment_provider: 'mock',\n    })\n    .select()\n    .single();\n\n  if (subError) {\n    console.error('Error creating mock subscription:', subError);\n    return { data: null, error: subError };\n  }\n\n  // Update profile tier\n  const { data: profile, error: profileError } = await supabase\n    .from('profiles')\n    .update({ subscription_tier: tier })\n    .eq('id', userId)\n    .select()\n    .single();\n\n  if (profileError) {\n    console.error('Error updating profile tier:', profileError);\n    return { data: null, error: profileError };\n  }\n\n  return { data: { subscription, profile }, error: null };\n}\n\n/**\n * Generate slug from title\n */\nexport function generateSlug(title: string): string {\n  return title\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '') // Remove accents\n    .replace(/[^a-z0-9\\s-]/g, '') // Remove special chars\n    .trim()\n    .replace(/\\s+/g, '-') // Replace spaces with hyphens\n    .replace(/-+/g, '-'); // Replace multiple hyphens with single\n}\n\n/**\n * Format duration in seconds to readable format\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  if (hours > 0) {\n    return `${hours}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n  }\n  return `${minutes}:${String(secs).padStart(2, '0')}`;\n}\n\n/**\n * Format view count\n */\nexport function formatViewCount(count: number): string {\n  if (count >= 1000000) {\n    return `${(count / 1000000).toFixed(1)}M`;\n  }\n  if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}K`;\n  }\n  return count.toString();\n}\n\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}