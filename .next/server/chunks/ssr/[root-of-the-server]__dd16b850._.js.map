{"version":3,"sources":["turbopack:///[project]/app/platform/researchers/page.tsx"],"sourcesContent":["import { createClient } from '@/lib/supabase/server';\nimport Link from 'next/link';\nimport type { ResearcherProfile } from '@/lib/supabase/types';\nimport type { Profile, ResearcherProfile } from '@/lib/supabase/types';\n\ninterface ResearcherWithProfile {\n  user_id: string;\n  bio: string | null;\n  expertise: string[] | null;\n  institution: string | null;\n  profile: Profile;\n  video_count?: number;\n  post_count?: number;\n}\n\nexport default async function ResearchersListPage() {\n  const supabase = await createClient();\n\n  // Get all approved researchers with their profiles\n  const { data: researchers } = await supabase\n    .from('researcher_profiles')\n    .select(`\n      user_id,\n      bio,\n      expertise,\n      institution,\n      profile:profiles!user_id (\n        id,\n        full_name,\n        avatar_url,\n        email\n      )\n    `)\n    .eq('verification_status', 'approved');\n\n  // Get content counts for each researcher\n  const researchersWithCounts = await Promise.all(\n    (researchers || []).map(async (researcher) => {\n      const [videosResult, postsResult] = await Promise.all([\n        supabase\n          .from('videos')\n          .select('id', { count: 'exact', head: true })\n          .eq('researcher_id', researcher.user_id)\n          .eq('published', true),\n        supabase\n          .from('posts')\n          .select('id', { count: 'exact', head: true })\n          .eq('researcher_id', researcher.user_id)\n          .eq('published', true),\n      ]);\n\n      return {\n        ...researcher,\n        video_count: videosResult.count || 0,\n        post_count: postsResult.count || 0,\n      };\n    })\n  );\n\n  return (\n    <div className=\"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-[color:var(--text-primary)]\">\n          Nossos Pesquisadores\n        </h1>\n        <p className=\"mt-2 text-[color:var(--text-muted)]\">\n          Conhe√ßa os especialistas que compartilham conhecimento na plataforma\n        </p>\n      </div>\n\n      {/* Researchers Grid */}\n      <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n        {researchersWithCounts.map((researcher) => (\n          <ResearcherCard key={researcher.user_id} researcher={researcher} />\n        ))}\n      </div>\n\n      {researchersWithCounts.length === 0 && (\n        <div className=\"rounded-lg border border-dashed border-[color:var(--border-soft)] p-12 text-center\">\n          <p className=\"text-lg text-[color:var(--text-muted)]\">\n            Nenhum pesquisador dispon√≠vel no momento\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ResearcherCard({ researcher }: { researcher: ResearcherWithProfile }) {\n  const profile = researcher.profile as Profile;\n\n  return (\n    <Link\n      href={`/platform/researchers/${researcher.user_id}`}\n      className=\"group rounded-lg border border-[color:var(--border-soft)] bg-white p-6 transition hover:shadow-lg\"\n    >\n      {/* Avatar & Name */}\n      <div className=\"flex items-start gap-4\">\n        <div className=\"flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-full bg-[color:var(--coral)] text-2xl font-semibold text-white\">\n          {profile.full_name.charAt(0).toUpperCase()}\n        </div>\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-[color:var(--text-primary)] group-hover:text-[color:var(--coral)]\">\n            {profile.full_name}\n          </h3>\n          {researcher.institution && (\n            <p className=\"text-sm text-[color:var(--text-muted)]\">\n              {researcher.institution}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Bio */}\n      {researcher.bio && (\n        <p className=\"mt-4 text-sm text-[color:var(--text-muted)] line-clamp-3\">\n          {researcher.bio}\n        </p>\n      )}\n\n      {/* Expertise */}\n      {researcher.expertise && researcher.expertise.length > 0 && (\n        <div className=\"mt-4 flex flex-wrap gap-2\">\n          {researcher.expertise.slice(0, 3).map((skill) => (\n            <span\n              key={skill}\n              className=\"rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700\"\n            >\n              {skill}\n            </span>\n          ))}\n          {researcher.expertise.length > 3 && (\n            <span className=\"rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700\">\n              +{researcher.expertise.length - 3}\n            </span>\n          )}\n        </div>\n      )}\n\n      {/* Stats */}\n      <div className=\"mt-4 flex items-center gap-4 border-t border-[color:var(--border-soft)] pt-4 text-sm text-[color:var(--text-muted)]\">\n        <span>üé¨ {researcher.video_count} v√≠deos</span>\n        <span>üìù {researcher.post_count} posts</span>\n      </div>\n\n      <div className=\"mt-4 flex items-center text-sm font-medium text-[color:var(--coral)]\">\n        Ver perfil completo ‚Üí\n      </div>\n    </Link>\n  );\n}\n\n"],"names":[],"mappings":"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"}