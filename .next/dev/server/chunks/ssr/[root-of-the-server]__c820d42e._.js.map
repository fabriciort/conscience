{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/fabriciort/Developer/conscience/lib/supabase/client.ts"],"sourcesContent":["// Client-side Supabase client for browser usage\nimport { createBrowserClient } from '@supabase/ssr';\nimport type { Database } from './types';\n\nexport function createClient() {\n  return createBrowserClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n}\n\n"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAChD;AAAA;;AAGO,SAAS;IACd,OAAO,IAAA,8SAAmB;AAI5B","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///home/fabriciort/Developer/conscience/lib/utils/dev-helpers.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/client';\nimport type { SubscriptionTier } from '@/lib/supabase/types';\n\nexport const DEV_CONFIG = {\n  enableDevToolbar: process.env.NODE_ENV === 'development',\n  bypassEmailVerification: true,\n  mockPayments: true,\n  showDebugInfo: process.env.NODE_ENV === 'development',\n  \n  // Test users for quick login\n  testUsers: {\n    viewer: 'viewer@test.com',\n    premium: 'premium@test.com',\n    researcher: 'researcher@test.com',\n  }\n};\n\n/**\n * Mock subscription purchase for development\n */\nexport async function devMockSubscription(\n  userId: string,\n  tier: SubscriptionTier\n) {\n  if (process.env.NODE_ENV !== 'development') {\n    console.warn('devMockSubscription should only be used in development');\n    return { data: null, error: new Error('Not in development mode') };\n  }\n\n  const supabase = createClient();\n  \n  // Create subscription record\n  const { data: subscription, error: subError } = await supabase\n    .from('subscriptions')\n    .insert({\n      user_id: userId,\n      tier,\n      starts_at: new Date().toISOString(),\n      expires_at: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString(),\n      is_active: true,\n      payment_provider: 'mock',\n    })\n    .select()\n    .single();\n\n  if (subError) {\n    console.error('Error creating mock subscription:', subError);\n    return { data: null, error: subError };\n  }\n\n  // Update profile tier\n  const { data: profile, error: profileError } = await supabase\n    .from('profiles')\n    .update({ subscription_tier: tier })\n    .eq('id', userId)\n    .select()\n    .single();\n\n  if (profileError) {\n    console.error('Error updating profile tier:', profileError);\n    return { data: null, error: profileError };\n  }\n\n  return { data: { subscription, profile }, error: null };\n}\n\n/**\n * Generate slug from title\n */\nexport function generateSlug(title: string): string {\n  return title\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '') // Remove accents\n    .replace(/[^a-z0-9\\s-]/g, '') // Remove special chars\n    .trim()\n    .replace(/\\s+/g, '-') // Replace spaces with hyphens\n    .replace(/-+/g, '-'); // Replace multiple hyphens with single\n}\n\n/**\n * Format duration in seconds to readable format\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  if (hours > 0) {\n    return `${hours}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n  }\n  return `${minutes}:${String(secs).padStart(2, '0')}`;\n}\n\n/**\n * Format view count\n */\nexport function formatViewCount(count: number): string {\n  if (count >= 1000000) {\n    return `${(count / 1000000).toFixed(1)}M`;\n  }\n  if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}K`;\n  }\n  return count.toString();\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAGO,MAAM,aAAa;IACxB,kBAAkB,oDAAyB;IAC3C,yBAAyB;IACzB,cAAc;IACd,eAAe,oDAAyB;IAExC,6BAA6B;IAC7B,WAAW;QACT,QAAQ;QACR,SAAS;QACT,YAAY;IACd;AACF;AAKO,eAAe,oBACpB,MAAc,EACd,IAAsB;IAEtB;;IAKA,MAAM,WAAW,IAAA,yIAAY;IAE7B,6BAA6B;IAC7B,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SACnD,IAAI,CAAC,iBACL,MAAM,CAAC;QACN,SAAS;QACT;QACA,WAAW,IAAI,OAAO,WAAW;QACjC,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,WAAW;QACxE,WAAW;QACX,kBAAkB;IACpB,GACC,MAAM,GACN,MAAM;IAET,IAAI,UAAU;QACZ,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO;YAAE,MAAM;YAAM,OAAO;QAAS;IACvC;IAEA,sBAAsB;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAClD,IAAI,CAAC,YACL,MAAM,CAAC;QAAE,mBAAmB;IAAK,GACjC,EAAE,CAAC,MAAM,QACT,MAAM,GACN,MAAM;IAET,IAAI,cAAc;QAChB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;YAAE,MAAM;YAAM,OAAO;QAAa;IAC3C;IAEA,OAAO;QAAE,MAAM;YAAE;YAAc;QAAQ;QAAG,OAAO;IAAK;AACxD;AAKO,SAAS,aAAa,KAAa;IACxC,OAAO,MACJ,WAAW,GACX,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAAI,iBAAiB;KACjD,OAAO,CAAC,iBAAiB,IAAI,uBAAuB;KACpD,IAAI,GACJ,OAAO,CAAC,QAAQ,KAAK,8BAA8B;KACnD,OAAO,CAAC,OAAO,MAAM,uCAAuC;AACjE;AAKO,SAAS,eAAe,OAAe;IAC5C,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,UAAU,OAAQ;IAC9C,MAAM,OAAO,UAAU;IAEvB,IAAI,QAAQ,GAAG;QACb,OAAO,GAAG,MAAM,CAAC,EAAE,OAAO,SAAS,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,MAAM,QAAQ,CAAC,GAAG,MAAM;IACxF;IACA,OAAO,GAAG,QAAQ,CAAC,EAAE,OAAO,MAAM,QAAQ,CAAC,GAAG,MAAM;AACtD;AAKO,SAAS,gBAAgB,KAAa;IAC3C,IAAI,SAAS,SAAS;QACpB,OAAO,GAAG,CAAC,QAAQ,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;IAC3C;IACA,IAAI,SAAS,MAAM;QACjB,OAAO,GAAG,CAAC,QAAQ,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;IACxC;IACA,OAAO,MAAM,QAAQ;AACvB","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/fabriciort/Developer/conscience/lib/utils/access-control.ts"],"sourcesContent":["import type { SubscriptionTier, UserRole } from '@/lib/supabase/types';\n\n// Tier hierarchy for access control\nconst TIER_HIERARCHY: SubscriptionTier[] = ['free', 'essential', 'advanced', 'corporate'];\n\n/**\n * Check if user has access to content based on subscription tier\n */\nexport function canAccessContent(\n  userTier: SubscriptionTier,\n  contentTier: SubscriptionTier\n): boolean {\n  const userIndex = TIER_HIERARCHY.indexOf(userTier);\n  const contentIndex = TIER_HIERARCHY.indexOf(contentTier);\n  \n  return userIndex >= contentIndex;\n}\n\n/**\n * Check if user has researcher/admin role\n */\nexport function isResearcher(role: UserRole): boolean {\n  return role === 'researcher' || role === 'admin';\n}\n\n/**\n * Check if user is admin\n */\nexport function isAdmin(role: UserRole): boolean {\n  return role === 'admin';\n}\n\n/**\n * Get tier display name\n */\nexport function getTierDisplayName(tier: SubscriptionTier): string {\n  const names: Record<SubscriptionTier, string> = {\n    free: 'Gratuito',\n    essential: 'Essencial',\n    advanced: 'AvanÃ§ado',\n    corporate: 'Corporate Labs',\n  };\n  return names[tier];\n}\n\n/**\n * Get tier color for UI\n */\nexport function getTierColor(tier: SubscriptionTier): string {\n  const colors: Record<SubscriptionTier, string> = {\n    free: 'text-gray-600 bg-gray-100',\n    essential: 'text-blue-600 bg-blue-100',\n    advanced: 'text-purple-600 bg-purple-100',\n    corporate: 'text-amber-600 bg-amber-100',\n  };\n  return colors[tier];\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA,oCAAoC;AACpC,MAAM,iBAAqC;IAAC;IAAQ;IAAa;IAAY;CAAY;AAKlF,SAAS,iBACd,QAA0B,EAC1B,WAA6B;IAE7B,MAAM,YAAY,eAAe,OAAO,CAAC;IACzC,MAAM,eAAe,eAAe,OAAO,CAAC;IAE5C,OAAO,aAAa;AACtB;AAKO,SAAS,aAAa,IAAc;IACzC,OAAO,SAAS,gBAAgB,SAAS;AAC3C;AAKO,SAAS,QAAQ,IAAc;IACpC,OAAO,SAAS;AAClB;AAKO,SAAS,mBAAmB,IAAsB;IACvD,MAAM,QAA0C;QAC9C,MAAM;QACN,WAAW;QACX,UAAU;QACV,WAAW;IACb;IACA,OAAO,KAAK,CAAC,KAAK;AACpB;AAKO,SAAS,aAAa,IAAsB;IACjD,MAAM,SAA2C;QAC/C,MAAM;QACN,WAAW;QACX,UAAU;QACV,WAAW;IACb;IACA,OAAO,MAAM,CAAC,KAAK;AACrB","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/fabriciort/Developer/conscience/app/platform/feed/page.tsx"],"sourcesContent":["import { createClient } from '@/lib/supabase/server';\nimport Link from 'next/link';\nimport { formatDuration, formatViewCount } from '@/lib/utils/dev-helpers';\nimport { getTierColor, getTierDisplayName } from '@/lib/utils/access-control';\nimport type { Video, Profile } from '@/lib/supabase/types';\n\ninterface VideoWithResearcher extends Video {\n  researcher?: {\n    full_name: string;\n    avatar_url: string | null;\n  };\n}\n\nexport default async function FeedPage() {\n  const supabase = await createClient();\n  \n  const { data: { user } } = await supabase.auth.getUser();\n  \n  let userTier: 'free' | 'essential' | 'advanced' | 'corporate' = 'free';\n  \n  if (user) {\n    const { data: profile } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', user.id)\n      .maybeSingle() as { data: Profile | null };\n    \n    if (profile) {\n      userTier = profile.subscription_tier;\n    }\n  }\n\n  // Get all published videos with researcher info\n  const { data: videos } = await supabase\n    .from('videos')\n    .select(`\n      *,\n      researcher:profiles!researcher_id (\n        full_name,\n        avatar_url\n      )\n    `)\n    .eq('published', true)\n    .order('published_at', { ascending: false });\n\n  const typedVideos = (videos || []) as unknown as VideoWithResearcher[];\n\n  return (\n    <div className=\"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-[color:var(--text-primary)]\">\n          Feed de VÃ­deos\n        </h1>\n        <p className=\"mt-2 text-[color:var(--text-muted)]\">\n          Explore conteÃºdos exclusivos dos nossos pesquisadores\n        </p>\n      </div>\n\n      {/* Tier Info */}\n      <div className=\"mb-6 rounded-lg border border-[color:var(--border-soft)] bg-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-sm text-[color:var(--text-muted)]\">Seu plano atual:</p>\n            <p className={`mt-1 inline-block rounded-full px-3 py-1 text-sm font-semibold ${getTierColor(userTier)}`}>\n              {getTierDisplayName(userTier)}\n            </p>\n          </div>\n          {userTier === 'free' && (\n            <Link\n              href=\"/pricing\"\n              className=\"rounded-full bg-[color:var(--coral)] px-4 py-2 text-sm font-semibold text-white hover:bg-[color:var(--coral)]/90\"\n            >\n              Fazer upgrade\n            </Link>\n          )}\n        </div>\n      </div>\n\n      {/* Videos Grid */}\n      <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n        {typedVideos.map((video) => (\n          <VideoCard key={video.id} video={video} userTier={userTier} />\n        ))}\n      </div>\n\n      {typedVideos.length === 0 && (\n        <div className=\"rounded-lg border border-dashed border-[color:var(--border-soft)] p-12 text-center\">\n          <p className=\"text-lg text-[color:var(--text-muted)]\">\n            Nenhum vÃ­deo disponÃ­vel no momento\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction VideoCard({ \n  video, \n  userTier \n}: { \n  video: VideoWithResearcher; \n  userTier: string;\n}) {\n  const tierHierarchy = ['free', 'essential', 'advanced', 'corporate'];\n  const hasAccess = tierHierarchy.indexOf(userTier) >= tierHierarchy.indexOf(video.required_tier);\n\n  return (\n    <Link\n      href={`/platform/watch/${video.id}`}\n      className=\"group relative overflow-hidden rounded-lg border border-[color:var(--border-soft)] bg-white transition hover:shadow-lg\"\n    >\n      {/* Thumbnail */}\n      <div className=\"relative aspect-video overflow-hidden bg-gray-100\">\n        {video.thumbnail_url ? (\n          <img\n            src={video.thumbnail_url}\n            alt={video.title}\n            className=\"h-full w-full object-cover transition group-hover:scale-105\"\n          />\n        ) : (\n          <div className=\"flex h-full w-full items-center justify-center bg-gradient-to-br from-[color:var(--peach)] to-[color:var(--sage)]\">\n            <span className=\"text-4xl\">ðŸŽ¬</span>\n          </div>\n        )}\n\n        {/* Duration Badge */}\n        {video.duration_seconds && (\n          <div className=\"absolute bottom-2 right-2 rounded bg-black/80 px-2 py-1 text-xs font-semibold text-white\">\n            {formatDuration(video.duration_seconds)}\n          </div>\n        )}\n\n        {/* Lock Overlay */}\n        {!hasAccess && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\n            <div className=\"text-center text-white\">\n              <div className=\"text-4xl mb-2\">ðŸ”’</div>\n              <p className=\"text-sm font-semibold\">\n                {getTierDisplayName(video.required_tier)}\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"p-4\">\n        <h3 className=\"font-semibold text-[color:var(--text-primary)] line-clamp-2\">\n          {video.title}\n        </h3>\n        \n        {video.description && (\n          <p className=\"mt-2 text-sm text-[color:var(--text-muted)] line-clamp-2\">\n            {video.description}\n          </p>\n        )}\n\n        {/* Researcher Info */}\n        <div className=\"mt-4 flex items-center gap-2\">\n          <div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-[color:var(--coral)] text-xs font-semibold text-white\">\n            {video.researcher?.full_name.charAt(0).toUpperCase()}\n          </div>\n          <span className=\"text-xs text-[color:var(--text-muted)]\">\n            {video.researcher?.full_name}\n          </span>\n        </div>\n\n        {/* Meta */}\n        <div className=\"mt-3 flex items-center justify-between text-xs text-[color:var(--text-muted)]\">\n          <span>{formatViewCount(video.view_count)} visualizaÃ§Ãµes</span>\n          {video.required_tier !== 'free' && (\n            <span className={`rounded-full px-2 py-0.5 ${getTierColor(video.required_tier)}`}>\n              {getTierDisplayName(video.required_tier)}\n            </span>\n          )}\n        </div>\n\n        {/* Tags */}\n        {video.tags && video.tags.length > 0 && (\n          <div className=\"mt-3 flex flex-wrap gap-1\">\n            {video.tags.slice(0, 3).map((tag) => (\n              <span\n                key={tag}\n                className=\"rounded-full bg-[color:var(--surface-muted)] px-2 py-1 text-xs text-[color:var(--text-muted)]\"\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n    </Link>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}